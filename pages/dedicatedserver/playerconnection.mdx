---
title: playerconnection
description: |-
    λ‚΄μ©μ…λ ¥
date: 2024-06-08T09:31:30+09:00
preview: μ΄λ―Έμ§€ μ£Όμ†
draft: false
tags:
    - Metaverse Dev
categories:
    - Metaverse
    - dedicatedserver
---

import { Callout } from 'nextra/components'


μ„λ²„λ” ν”λ μ΄μ–΄λ‹Ή ν•λ‚μ μ»¤λ„¥νΈλ¥Ό μƒμ„±ν•λ‹¤

μ»¤λ„¥νΈμ— λ€ν•μ—¬ λ‹¤μ–‘ν• Protocol μ—°κ²°ν•λ”λ° μ΄λ¬ν• λ‹¤μ–‘ν• μ²΄λ„λ“¤μ„ μ—°κ²°ν•λ” κ²ƒμΌλ΅ ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄λ¥Ό μ†΅μμ‹  ν•  μ μλ” μλ‹¨μ„ λ§λ“ λ‹¤.\
λν• μ–΄λ– ν• μ—‘ν„°κ°€ μƒμ„±λλ©° μƒλ΅μ΄ μ²΄λ„μ„ λ§λ“λ” κ²ƒμΌλ΅(μ•΅ν„°κ°€ μƒμ„±λμ—μ„λ• μ„λ΅μ μ—°κ²°μ„ μƒμ„±ν•μ—¬ μ¶”μΈ΅λ¨)μ„λ΅ μ—°κ²°λ΅ μ΅΄μ¬λ¥Ό ν™•μΈν•λ‹¤κ°€\
μ—‘ν„° μ²΄λ„μ„ μ—†μ—λ” κ²ƒμΌλ΅ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ‚¬λΌμ§€κ² ν‘ν„μ„ ν•λ‹¤κ³  μ•λ ¤μ¤€λ‹¤.

μƒμ„ μ΄λ¬ν• λ¶€λ¶„λ“¤μ€ λ¨λ‘ λ³µμ λ μ¤λΈμ νΈλ΅ ν΄λΌμ΄μ–ΈνΈκ°€ ν‘μ‹ν•κ³  μκΈ° λ•λ¬Έμ— μ‹¤μ  μ¤λΈμ νΈμ μμ •μ„ λ§‰λ”κ²ƒμΌλ΅ λκ»΄μ§„λ‹¤

[μ΄λ¶€λ¶„μ— λ€ν•μ—¬λ” μΆ€λ” κ³µλ¶€ν•λ‹¤μ μ¶”κ°€μ μΈ μ§€μ‹μ΄ μμ„λ• μ‘μ„±ν•λ„λ΅ ν•κ² λ‹¤.]

[μ¶”κ°€μ μΌλ΅ κµ¬μ„± μ΄λ―Έμ§€λ¥Ό λ§λ“¤κ²ƒ ]


## Server μ™€ Client μ‚¬μ΄

Replication : ν΄λΌμ΄μ–ΈνΈμ—κ² λ³µμ λ λ°μ΄ν„°λ¥Ό μ—…λ°μ΄νΈ ν•λ‹¤
Rep Notify (OnRep) : ReplicationμΌλ΅ λ°μ΄ν„°κ°€ λ°”λ€μ—μ„λ• λ°μƒν•λ” λ΅μ§μ„ λ§ν•λ‹¤.
Remote Procedure Calls (RPC) : λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒμ„ λ§ν•λ‹¤ 
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈν•ν… μ‹ν‚¤κΈ° (μ: (server) client λ„ ν”λ“¤μ–΄λ΄)
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ‹ν‚¤κΈ° (μ: (client) serverμ•Ό λ§µμ— μ¤λ΅λΌ λ°μƒμ‹μΌ! )
- multicast (Server to Server + Client) [μ•„μ§ λ­”μ§€ λ¨λ¦„]

### Replication

Actorsμ— λ³µμ ν•  κ²ƒμΈμ§€ μ„¤μ •ν•  μ μλ‹¤
- μ—”μ§„μ—μ„ Replicatesλ¥Ό trueλ΅ μ„¤μ •ν•λ” κ²ƒμΌλ΅ RPCλ¥Ό μ†΅μμ‹  ν•  μ μλ‹¤. (μ”μ•½ λ°μ΄ν„° κ³µμ ν•  μ μλ‹¤.)
μ„λ²„λ” μ§€μ†μ μΌλ΅ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² μ—…λ°μ΄νΈ ν• κ² μλ”μ§€ ν™•μΈν•λ‹¤

#### ν”„λ μ„λ‹Ή λ°μ΄ν„° 

ν”„λ μ„λ‹Ή λ°μ΄ν„°λ¥Όλ¥Ό μ–Όλ§λ‚ λ³΄λ„¬ κ²ƒμΈκ°€λ¥Ό κ³ λ―Όν•μ—¬μ•Όν•λ‹¤
- λ¨λ“  μ¤νΈλ­νΈ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” κ²ƒμ΄ μ•„λ‹ ν•„μ”ν• λ¶€λ¶„λ§ μ „μ†΅ ν•μ—¬μ•Όν•λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μ„λ΅ κ°™μ€ ν”„λ μ„μ΄ μ•„λ‹ μ μλ‹¤λ” κ²ƒμ„ μ—Όλ‘ν•μ—¬μ•Ό ν•λ‹¤.\
- λ°μ΄ν„°μ μ†΅μμ‹  μμ„ (μ–΄λ– ν• λ°μ΄ν„°κ°€ λ¨Όμ €μ™”λ”μ§€ μ•μ•„μ•Όν•λ‹¤)
- λλ”λ§ μ†λ„μ μ°¨μ΄λ΅ ν”„λ μ„μ μ°¨μ΄κ°€ λ°μƒ ν•  μ μλ‹¤.

νΉμ • λ°μ΄ν„°μ— μΆ€λ” λ§μ€ update
- Net Update Frequency (μ—…λ°μ΄νΈ λΉλ„): μ–Όλ§λ‚ μμ£Ό μ—…λ°μ΄νΈ ν•  κ²ƒμΈκ°€ (1μ΄ 100λ²μ΄ λ””ν΄νΈ)
- Net Proirity (μ°μ„ μμ„) : μ–΄λ– ν• λ°μ΄ν„°λ¥Ό μ°μ„ μΌλ΅ μ—…λ°μ΄νΈ ν•  κ²ƒμΈκ°€

### Replicated Properties

κ²μ„μ—”μ§„μ—μ„ λ¨λ“  levelκ³Ό actorλ¥Ό λ§λ“¤κ³  serverμ™€ clientλ¥Ό build ν–μμΌλ΅\
μ„λ΅ μ–΄λ– ν• λ°μ΄ν„°κ°€ λ™μ λκ³  νΈμ¶ λλ”μ§€ μ•κ³  μλ‹¤.\
κ·Έλ ‡κΈ°μ— μ²μμ— μ΄λ¬ν• λ°μ΄ν„°λ¥Ό μ„Έν…ν•΄ μ¤„ ν•„μ”λ” μ—†λ‹¤.\
μ§€μ†μ μΌλ΅ λ™μΌν• μƒν…λ¥Ό λ§λ“¤κΈ° μ„ν•΄μ„λ” νΉμ • λ³€ν™”ν•λ” μ†μ„±μ„ λ³µμ ν•μ—¬ κ³µμ ν•λ” κ²ƒμΌλ΅ κ°™μ€ μƒνƒλ¥Ό μ μ§€μ‹ν‚¤λ” κ²ƒμ΄λ‹¤.

### Rep Notify

μ–΄λ– ν• λ΅μ§μΌλ΅ ν™μ„±ν™” ν•λ ¤λ©΄ "Replicated"κ°€ μ•„λ‹ "RepNotify" μΌλ΅ μ„¤μ •ν•λ‹¤.\
ν΄λΌμ΄μ–ΈνΈμ λ³µμ λ κ°’μ„ λ°›μ•μ„λ• ν–‰λ™μ„ ν•  μ μλ„λ΅ ν•λ”κ²ƒμ΄λ‹¤

| μμ‹  λ°μ΄ν„° | RepNotify ν‘ν„ |
| --- | --- |
| κ³µμ μ„μΉκ°€ λ°”λ€ κ°’μ΄ μ™“λ‹¤ | κ³µμ΄ λ°”λ€ κ°’κΉμ§€ λ‚ λΌκ°€λ” κ²ƒμΌλ΅ ν‘ν„ν•λ‹¤.(κ³µμ΄ μκ°„μ΄λ™ν•μ§€ μ•κ²) |
| μƒνƒκ°€ μΉ¨λ€μ— λ•λ” κ²ƒμΌλ΅ λ°”κΌ‡λ‹¤ | μΉ¨λ€λ΅ λ•λ” μ• λ‹λ©”μ΄μ…μ„ μ‹¤ν–‰ν•λ‹¤ |

μ΄λ¬ν• ν”„λ μ„λ³„ λ¶€λ“λ¬μ΄ ν™”λ©΄ ν¨κ³Όλ¥Ό λ³΄μ—¬μ£ΌκΈ° μ„ν•΄ μ‚¬μ©ν•κΈ°λ„ ν•λ©°\
μ „μ†΅ν•λ” λ°μ΄ν„°κ°€ μ μ§€λ§ ν¨κ³Όμ μΌλ΅ λ‚νƒ€λ„¬ μλ„ μκ² λλ‹¤.

### Remote Procedure Calls (RPC)

RPCμ—λ” 3κ°€μ§€λ΅ μ‘λ™ λ°©μ‹μΌλ΅ λ¶„λ¥ ν•λ”κ²ƒ κ°™λ‹¤ (ν™•μ‹¤ ν•μ§€ μ•μ)

| μ‘μ© | μ„¤λ… |
| --- | --- |
| Run on owning client | μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ ν•¨μλ¥Ό νΈμ¶ν•λ”κ²ƒ |
| Run on Server |  ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒ |
| multicast | μ„λ²„μ ν•¨μλ¥Ό μ‹¤ν–‰ν•λ©° μ„λ²„μ— μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ™ν•κ²ƒμ„ μ „λ‹¬ν•λ” κ²ƒ |


### Relevancy

μ‹¤μ  ν΄λΌμ΄μ–ΈνΈκ°€ νΉμ • μ •λ³΄μ— λ€ν•μ—¬ μ—…λ°μ΄νΈ λ°›μ•„μ•Ό ν•λ‚? μ— λ€ν• κ²ƒμ΄λ‹¤.\
λ„λ¬΄ λ©€κ±°λ‚ λ‚΄ κ²μ„μ— μ΅΄μ¬ν•μ§€λ„ μ•λ”λ° κ·Έκ²ƒμ„ μ—…λ°μ΄νΈ ν•  ν•„μ”λ” μ—†κΈ° λ•λ¬Έμ΄λ‹¤.

<Callout type="info" emoji="π’΅">
  unrealμ— κ²½μ° NetCullDistanceSquared λ΅ μ΅°μ μ„ ν•  μ μλ‹¤κ³  ν•λ‹¤.
  c++ μκ²½μ° IsNEtRelevantFor ν•¨μμ λ£°μ„ μ •μ΄ν•΄μ•Όν•λ‹¤κ³  ν•λ‹¤.
</Callout>


#### Entering / Leaving Relevancy

Relevancy μ—λ” μ΅°κΈ νΉμ΄ν• μ‚¬ν•­μ΄ μλ‹¤.\
μƒμ„μ—μ„ λ§ν•λ“―μ΄ Clientκ°€ μν–¥μ„ λ°›μ§€ μ•λ” λ‹¤λ©΄ updateκ°€ μ‹¤ν–‰λμ§€ μ•κ³  μ΄λ¬ν• λ¶€λ¶„μ— μμ–΄\
μ•„μ§ μ—…λ°μ΄νΈλ¥Ό μΈμ§€ν•μ§€ λ»ν• Clientκ°€ updateλ actorμ— μ ‘κ·Όν–μ„λ• μƒλ΅ν μƒμ„±λλ©° λ°μ‘ν•λ” μ¤λ¥μ΄λ‹¤.

![playerconnection_relevancy](./assets/playerconnection_relevancy.gif)

μ΄λ¬ν• μ‚¬ν•­μ„ μΈμ§€ν•κ³  λ³€ν™”μ— μΈμ§€λμ§€ μ•μ€ μ¤λΈμ νΈμ λ΅μ§μ΄ κΊΌλ¦¬λ‚ μ—†μ΄ μ‘λ„ν•λ„λ΅ λ§λ“¤μ–΄μ•Ό ν•λ‹¤. 

## μ©μ–΄?

[VoIP](https://en.wikipedia.org/wiki/Voice_over_IP)(voice over Internet Protocol) : μμ„± μΈν„°λ„· Protocol 

Net Relevant : μ–΄λ– ν• λ™μ‘μ„ client μ—κ² λ³΄λ‚΄μ•Ό ν•  μ§€ κ²€μ¦ν•λ” κ²ƒ

## μ°Έκ³ 
HosnestDanGames : [https://www.youtube.com/watch?v=t8Zlb2ggmt0](https://www.youtube.com/watch?v=t8Zlb2ggmt0)

μ‹μ‘ν•΄μ” μ–Έλ¦¬μ–Ό 2018 : [https://www.youtube.com/watch?v=3j0ycrzvkB4](https://www.youtube.com/watch?v=3j0ycrzvkB4)